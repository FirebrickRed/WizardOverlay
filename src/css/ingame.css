:root {
  --color-main-book-color: #BB9F7A;
  --color-header-book-page: #896646;
  --color-backpack-item-light: #7A2323;
  --color-backpack-item-default: #3C0000;

  /* Button Colors */
  --gold-main: #BCA735;
  --gold-light: #CCBD67;
  --gold-dark:  #837425;

  --red-main:   #AD3B21;
  --red-light:  #C92D18;
  --red-dark:   #792917;

  --arrow-gold: #AE942E;
  --arrow-gold-light: #C2AE62;
  --arrow-gold-dark:  #796720;

  --border-gray: #5A5A5A;
  --bg-gray:     #6D6B6D;
  --arrow-gray:  #9B9A9B;

  --world-icon-size: 40px;
  --world-selected-size: 48px;
}

body {
  margin: 0;
}

main {
  background: var(--color-main-book-color);
  display: grid;
  grid-template-rows: auto 1fr auto;
  border-radius: 8px;
  padding: 0 8px 4px;
  border: 2px var(--color-header-book-page) solid;
  width: 225px;
  min-height: 85px;
  color: yellow;
  text-shadow: 0 0 3px black;
  font-family: 'Luckiest Guy', cursive;
  font-size: 1.5rem;
  line-height: 1.5rem;
  transition: min-height 0.3s ease;
  user-select: none;
}

#quest_overlay.open {
  min-height: 225px;
}

h1 {
  text-align: center;
  font-size: 1.5rem;
  font-weight: normal;
  -webkit-text-stroke: 1px black;
  opacity: 100%;
  transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

#quest_name.open {
  opacity: 0;
}

p {
  margin: 0;
  font-size: 1.25rem;
  -webkit-text-stroke: 1px black;
  position: absolute;
}

progress {
  font-size: 1.25rem;
  width: 150px;
}

/* ===== Tracking Header ===== */
#tracking {
  position: relative;
  display: flex;
  align-items: flex-start;
  width: 100%;
  justify-content: space-between;
  padding: 0 8px;
  height: var(--world-selected-size);
}

#nav {
  display: flex;
  width: 100%;
  justify-content: space-around;
  align-items: center;
  position: relative;
  opacity: 100%;
  transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

#nav.open {
  opacity: 0;
}

/* ===== World Selector Container ===== */
#world_selector_container {
  position: absolute;
  top: 0;
  left: 8px;
  width: var(--world-selected-size);
  height: var(--world-selected-size);
  /* transition: width 0.35s cubic-bezier(0.4, 0, 0.2, 1), height 0.35s cubic-bezier(0.4, 0, 0.2, 1); */
}

#world_selector_container.open {
  z-index: 100;
}

#world_options {
  position: absolute;
  top: 0;
  left: 0;
  /* width: 100%;
  height: 100%; */
  pointer-events: none;
}

#world_options {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  
  /* Background styling with backpack colors */
  background: transparent;
  border-radius: 8px;
  transition: background 0.3s ease, padding 0.3s ease;
}

#world_selector_container.open #world_options {
  pointer-events: auto;
  margin-left: -8px;
  margin-top: -8px;
}

.world_card {
  position: relative;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0;
}

.world_card img {
  /* height: 2rem; */
  height: 100%;
  width: 100%;
  object-fit: contain;
}

.world_card p {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 2px;
  font-size: 10px;
  color: yellow;
  font-family: 'Luckiest Guy';
  line-height: 10px;
  text-align: center;
  white-space: nowrap;
}

.world_card:hover {
  filter: brightness(1.15) saturate(1.05);
}

button:hover {
  filter: brightness(1.15) saturate(1.05);
}

#selected_world {
  position: absolute;
  top: 2px;
  left: -8px;
  width: var(--world-selected-size);
  height: var(--world-selected-size);
  z-index: 50;
  transition: box-shadow 0.3s ease;
}

#selected_world_img {
  height: var(--world-selected-size);
  width: var(--world-selected-size);
}

#selected_world_text {
  font-size: 0.8rem;
  line-height: 0.8rem;
  width: 60px;
}

.world_option {
  position: absolute;
  width: var(--world-icon-size);
  height: var(--world-icon-size);
  border-radius: 50%;
  overflow: visible;
  
  /* Start collapsed at center of selected world */
  left: calc(var(--world-selected-size) / 2 - var(--world-icon-size) / 2);
  top: calc(var(--world-selected-size) / 2 - var(--world-icon-size) / 2);
  transform: scale(0);
  opacity: 0;
  
  /* Bouncy animation */
  transition: 
    left 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
    top 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
    transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
    opacity 0.3s ease;
  
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);
}

.world_option img {
  height: var(--world-icon-size);
  width: var(--world-icon-size);
}

.world_option p {
  font-size: 10px;
  line-height: 8px;
  width: 40px;
  text-wrap: auto;
  overflow-wrap: anywhere;
}

/* base circular button */
.spell-btn {
  position: relative;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  padding: 0;
  border: 0;
  cursor: pointer;
  background:
    radial-gradient(circle at 30% 20%,
      var(--gold-light) 0%,
      var(--gold-main) 45%,
      var(--gold-dark) 80%);
  box-shadow:
    0 1px 0 rgba(0, 0, 0, 0.7),
    0 0 0 1px #2d1b0b;
}

/* inner red disc */
.spell-btn::before {
  content: "";
  position: absolute;
  inset: 1px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 20%,
      var(--red-light) 0%,
      var(--red-main) 45%,
      var(--red-dark) 90%);
  box-shadow:
    inset 0 2px 4px rgba(255, 255, 255, 0.2),
    inset 0 -1px 5px rgba(0, 0, 0, 0.7);
  border: 1px #2d1b0b solid;
}

/* arrow icon */
.spell-icon {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 1;
  fill: var(--arrow-gold);
  filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.8));
  stroke: transparent;
}

/* Disabled state */
.spell-btn:disabled {
  cursor: default;
  background:
    radial-gradient(circle at 30% 20%,
      #B4B3B4 0%,
      var(--border-gray) 45%,
      #3E3E3E 80%);
}

.spell-btn:disabled::before {
  background:
    radial-gradient(circle at 30% 20%,
      #919091 0%,
      var(--bg-gray) 45%,
      #4C4A4C 90%);
  border-color: #1e1c1b;
}

.spell-btn:disabled .spell-icon {
  fill: var(--arrow-gray);
  filter: none;
  opacity: 0.9;
}

.right {
  left: 1px;
}

.left {
  right: 1px;
}

#closeButton {
  position: absolute;
  left: 205px;
  top: 2px;
  border-radius: 50%;
  height: 24px;
  width: 24px;
  cursor: pointer;
  background: radial-gradient(circle at 30% 20%, var(--gold-light) 0%, var(--gold-main) 45%, var(--gold-dark) 80%);
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.7), 0 0 0 1px #2d1b0b;
  border: none;
}

#closeButton::before {
  content: "";
  position: absolute;
  inset: 1px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 20%,
      var(--red-light) 0%,
      var(--red-main) 45%,
      var(--red-dark) 90%);
  box-shadow:
    inset 0 2px 4px rgba(255, 255, 255, 0.2),
    inset 0 -1px 5px rgba(0, 0, 0, 0.7);
  border: 1px #2d1b0b solid;
}

#closeButton svg {
  z-index: 1;
  stroke: var(--arrow-gold);
  filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.8));
  position: relative;
  left: -4px;
  width: 20px;
  height: 20px;
  top: 1px;
}
